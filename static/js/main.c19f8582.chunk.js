(this.webpackJsonpfinal=this.webpackJsonpfinal||[]).push([[0],{140:function(e,t,s){},142:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),i=s(14),c=s.n(i),r=s(8),o=s.n(r),d=s(29),l=s(15),j=s(16),h=s(18),u=s(17),b=s(6),p=(s(139),s(140),s(21)),O=s.p+"static/media/link_icon.eb89ac93.svg",y=s.p+"static/media/qr_code.96c76ad6.svg",m=s(3),x=function(e){Object(h.a)(t,e);Object(u.a)(t);function t(e){return Object(l.a)(this,t),superprops,Object(p.a)(undefined)}return Object(j.a)(t,[{key:"render",value:function(){var e=this.linkify(this.props.history_item.value),t=e.includes("</a>");return Object(m.jsxs)("div",{className:"history_item",children:[Object(m.jsx)("img",{src:t?O:y}),Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{className:"history_item_title",children:t?"\u0421\u0441\u044b\u043b\u043a\u0430":"\u0422\u0435\u043a\u0441\u0442"}),t?e:Object(m.jsx)("p",{className:"history_item_text",children:this.props.history_item.value})]})]})}}]),t}(a.a.Component),f=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(l.a)(this,s),(e=t.call(this)).onBridgeResult=function(t){switch(e.setState({qrResult:e.state.qrResult+t.detail.data}),console.log("bridge e = "+JSON.stringify(t)),t.detail.type){case"VKWebAppOpenCodeReaderResult":var s={key:t.detail.data._id,value:t.detail.data.code_data},n=e.state.history;n.push(s),e.setState({history:n});break;default:break;case"VKWebAppStorageGetKeysResult":o.a.send("VKWebAppStorageGet",{keys:t.detail.data.keys});break;case"VKWebAppStorageGetResult":var a=t.detail.data.keys;a.length>0&&e.setState({history:a})}},e.openScanner=function(){o.a.send("VKWebAppOpenCodeReader")},e.state={qrResult:void 0,history:[]},e}return Object(j.a)(s,[{key:"componentDidMount",value:function(){o.a.subscribe(this.onBridgeResult),o.a.send("VKWebAppStorageGetKeys",{count:100,offset:0})}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"qrcodes_container",children:[Object(m.jsx)(b.e,{separator:!1,children:"QR-\u043a\u043e\u0434\u044b"}),Object(m.jsx)("div",{className:"qr_button",children:Object(m.jsx)(b.c,{onClick:this.openScanner,size:"l",stretched:!0,style:{marginTop:16,marginBottom:28},children:"\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c QR-\u043a\u043e\u0434"})}),Object(m.jsx)(b.f,{}),this.state.history.length>0&&Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{className:"qr_count",children:["\u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e : ",this.state.history.length]}),this.state.history.map((function(e,t){return Object(m.jsx)(x,{index:t,history_item:e},t)}))]}),this.state.qrResult&&Object(m.jsx)("p",{children:JSON.stringify(this.state.qrResult)})]})}}]),s}(a.a.Component),v=(s.p,function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){return Object(l.a)(this,s),t.call(this)}return Object(j.a)(s,[{key:"render",value:function(){return Object(m.jsx)(b.a,{children:Object(m.jsx)(b.b,{children:Object(m.jsx)(k,{})})})}}]),s}(a.a.Component)),g=v,k=Object(b.m)((function(e){var t=e.viewWidth,s=Object(b.l)(),n=a.a.useState("scanner"),i=Object(d.a)(n,2),c=(i[0],i[1],t>=b.k.TABLET),r=s!==b.i;return Object(m.jsx)(b.h,{header:r&&Object(m.jsx)(b.e,{separator:!1}),style:{justifyContent:"center"},children:Object(m.jsx)(b.g,{animate:!c,spaced:c,width:c?"560px":"100%",maxWidth:c?"560px":"100%",children:Object(m.jsx)(b.j,{id:"scanner",activePanel:"scanner",children:Object(m.jsx)(b.d,{id:"scanner",children:Object(m.jsx)(f,{})})})})})}),{viewWidth:!0});c.a.render(Object(m.jsx)(v,{}),document.getElementById("root")),o.a.send("VKWebAppInit"),c.a.render(Object(m.jsx)(g,{}),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.c19f8582.chunk.js.map