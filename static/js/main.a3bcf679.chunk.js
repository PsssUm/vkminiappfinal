(this.webpackJsonpfinal=this.webpackJsonpfinal||[]).push([[0],{139:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(14),r=a.n(i),c=a(8),l=a.n(c),o=a(28),d=a(15),h=a(16),j=a(18),b=a(17),u=a(6),p=(a(138),a(139),a.p+"static/media/link_icon.eb89ac93.svg"),O=a.p+"static/media/text_icon.34274a94.svg",y=a(3),m=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).linkify=function(e){var t,a,s;return t=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,a=/(^|[^\/])(www\.[\S]+(\b|$))/gim,s=/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,e.replace(t,'<a href="$1" target="_blank">$1</a>').replace(a,'$1<a href="http://$2" target="_blank">$2</a>').replace(s,'<a href="mailto:$1">$1</a>')},s}return Object(h.a)(a,[{key:"render",value:function(){var e=this.linkify(this.props.history_item.value),t=e.includes("</a>");return Object(y.jsxs)("div",{className:"history_item",children:[Object(y.jsx)("img",{src:t?p:O}),Object(y.jsxs)("div",{children:[Object(y.jsx)("p",{className:"history_item_title",children:t?"\u0421\u0441\u044b\u043b\u043a\u0430":"\u0422\u0435\u043a\u0441\u0442"}),t?Object(y.jsx)("p",{className:"rejection_comment",dangerouslySetInnerHTML:{__html:e}}):Object(y.jsx)("p",{className:"history_item_text",children:this.props.history_item.value})]})]})}}]),a}(n.a.Component),g=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).onBridgeResult=function(t){switch(e.setState({bridgeResult:e.state.bridgeResult+" "+t.detail.type}),console.log("bridge e = "+JSON.stringify(t.detail.type)),t.detail.type){case"VKWebAppOpenCodeReaderResult":e.setState({qrResult:e.state.qrResult+t.detail.data.code_data});var a={key:e.state.history.length+"",value:t.detail.data.code_data},s=e.state.history;s.push(a),e.setState({history:s}),l.a.send("VKWebAppStorageSet",a);break;default:break;case"VKWebAppStorageGetKeysResult":l.a.send("VKWebAppStorageGet",{keys:t.detail.data.keys});break;case"VKWebAppStorageGetResult":var n=t.detail.data.keys;n.length>0&&e.setState({history:n})}},e.openScanner=function(){l.a.send("VKWebAppOpenCodeReader")},e.state={qrResult:void 0,history:[{key:0,value:"asdasd"},{key:0,value:"https://google.com"}]},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){l.a.subscribe(this.onBridgeResult),l.a.send("VKWebAppStorageGetKeys",{count:100,offset:0})}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"qrcodes_container",children:[Object(y.jsx)(u.e,{separator:!1,children:"QR-\u043a\u043e\u0434\u044b"}),Object(y.jsx)("div",{className:"qr_button",children:Object(y.jsx)(u.c,{onClick:this.openScanner,size:"l",stretched:!0,style:{marginTop:16,marginBottom:28},children:"\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c QR-\u043a\u043e\u0434"})}),Object(y.jsx)(u.f,{}),this.state.history.length>0&&Object(y.jsxs)("div",{children:[Object(y.jsxs)("p",{className:"qr_count",children:["\u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e : ",this.state.history.length]}),this.state.history.map((function(e,t){return Object(y.jsx)(m,{index:t,history_item:e},t)}))]}),this.state.qrResult&&Object(y.jsx)("p",{children:JSON.stringify(this.state.qrResult)}),this.state.bridgeResult&&Object(y.jsx)("p",{children:JSON.stringify(this.state.bridgeResult)})]})}}]),a}(n.a.Component),f=(a.p,a.p,function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.call(this)}return Object(h.a)(a,[{key:"render",value:function(){return Object(y.jsx)(u.a,{children:Object(y.jsx)(u.b,{children:Object(y.jsx)(v,{})})})}}]),a}(n.a.Component)),x=f,v=Object(u.m)((function(e){var t=e.viewWidth,a=Object(u.l)(),s=n.a.useState("scanner"),i=Object(o.a)(s,2),r=(i[0],i[1],t>=u.k.TABLET),c=a!==u.i;return Object(y.jsx)(u.h,{header:c&&Object(y.jsx)(u.e,{separator:!1}),style:{justifyContent:"center"},children:Object(y.jsx)(u.g,{animate:!r,spaced:r,width:r?"560px":"100%",maxWidth:r?"560px":"100%",children:Object(y.jsx)(u.j,{id:"scanner",activePanel:"scanner",children:Object(y.jsx)(u.d,{id:"scanner",children:Object(y.jsx)(g,{})})})})})}),{viewWidth:!0});r.a.render(Object(y.jsx)(f,{}),document.getElementById("root")),l.a.send("VKWebAppInit"),r.a.render(Object(y.jsx)(x,{}),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.a3bcf679.chunk.js.map